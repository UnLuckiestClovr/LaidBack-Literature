<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Laid Back Literature</title>
    <link rel="stylesheet" href="./GeneralStyling.css">
    <script src="./LoginScript.js"></script>
    <script defer>

        var loggedIn = false;
        var authHeaderValue = null;

        function login() {
            username = document.getElementById("loginUName").value;
            password = document.getElementById("loginPass").value;
            authHeaderValue = "Basic " + btoa(username + ":" + password)


            var httpPath = "http://localhost:42070/auth/login/" + username + "/" + password
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.open("GET", httpPath, true)
            xmlHttp.send();
            // ON READY STATE CHANGE ---------------------------------------------------------
            xmlHttp.onreadystatechange = function () {
                if (this.readyState === XMLHttpRequest.DONE && this.status === 200) {
                    loggedIn = JSON.parse(this.responseText).logBool;
                    adLog = JSON.parse(this.responseText).adBool;
                }
            }

        }

        function anonLogin() {
            username = "anonymous"
            password = "anon_user"
            authHeaderValue = "Basic " + btoa(username + ":" + password)

            toggleLogoutLoginButtons(false);
            toggleAuthCRUDForms(false);
        }

        function getHTMLPage(pageName) {
            var httpPath = "http://localhost:42070/get-html-state/" + pageName.toLowerCase()
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.open("GET", httpPath, true)
            xmlHttp.send();
            // ON READY STATE CHANGE ---------------------------------------------------------
            xmlHttp.onreadystatechange = function () {
                if (this.readyState === XMLHttpRequest.DONE && this.status === 200) {
                    loggedIn = JSON.parse(this.responseText).logBool;
                    adLog = JSON.parse(this.responseText).adBool;
                }
            }
        }

    </script>
</head>
<body>


<table>
    <tr>
        <td><a href="#" onclick="getHTMLPage('home')">Home Page</a></td>
        <td><a href="#">Browse Books</a></td>
        <td><a href="#">Login / Logout</a></td>
    </tr>
</table>

<div id="blockContent">



</div>

</body>

<footer>
    <a id="adminCRUD" href="AdminPage.html">ADMIN INFO</a>
</footer>
</html>